{% extends "parts/master.html" %}

{% block body %}
    <div class="text-center mb-3">
        <h3 class="text-2xl items-center">Report Date <strong>{{ death_report.date }}</strong></h3>
    </div>

    <div class="flex gap-x-2">
        <div class="flex-1" x-data="{ activeSlide: {{ record_images[0].id }}, slides: {{ record_images|safe }} }">
            <!-- Prev/Next Arrows -->
            <div class="flex">
                <div class="flex items-center justify-center w-1/2">
                    <button
                            class="bg-blue-100 text-blue-500 hover:text-orange-500 font-bold hover:shadow-lg rounded-full w-12 h-12 -ml-6"
                            x-on:click="activeSlide = activeSlide === slides[0].id ? slides.length : activeSlide - 1">
                        &#8592;
                    </button>
                </div>
                <div class="flex items-center justify-center w-1/2">
                    <button
                            class="bg-blue-100 text-blue-500 hover:text-orange-500 font-bold hover:shadow rounded-full w-12 h-12 -mr-6"
                            x-on:click="activeSlide = activeSlide === slides.length ? slides[0].id : activeSlide + 1">
                        &#8594;
                    </button>
                </div>
            </div>
            <div class="bg-teal-100  justify-center items-center  max-h-screen overflow-y-auto ">

                <div
                        class="relative"

                >

                    <!-- Slides -->
                    <template x-for="slide in slides" :key="slide.id">
                        <div x-show="activeSlide === slide.id">
                            <div class="max-w-full px-2">
                                <img x-bind:src="slide.image_location"/>
                            </div>
                        </div>
                    </template>


                    <!-- Buttons -->
                    <div class="absolute w-full flex items-center justify-center px-4">
                        <template x-for="slide in slides" :key="slide.id">
                            <button
                                    class="flex-1 w-4 h-2 mt-4 mx-2 mb-0 rounded-full overflow-hidden transition-colors duration-200 ease-out hover:bg-blue-600 hover:shadow-lg"
                                    :class="{
              'bg-orange-600': activeSlide === slide.id,
              'bg-teal-300': activeSlide !== slide.id
          }"
                                    x-on:click="activeSlide = slide.id"
                            ></button>
                        </template>
                    </div>
                </div>

            </div>
        </div>
        <div class="flex-1 ...">
            {% include "forms/death_recode_add_form/index.html" %}
            Total Count - {{ death_report.death_records|length }}

            <ul>
                {% for death_record in death_report.death_records %}
                    <li>
                        {{ death_record.report_date }}
                        {{ death_record.reason }}
                        {{ death_record.gender }}
                        {{ death_record.age }}
                        {{ death_record.residence_location }}
                        {{ death_record.death_location }}
                        {{ death_record.reported_at }}

                        <form action="{{ url_for("delete_recode",id=death_record.id) }}" method="post">
                            <button type="submit">Delete</button>
                        </form>
                    </li>
                {% endfor %}
            </ul>

        </div>
    </div>


{% endblock %}